<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu & Servi√ßos - Demo</title>
  <style>
    /* Vari√°veis de Tema (Dark Premium) */
    :root {
      --bg-color: #09090b;
      --surface-color: #18181b;
      --surface-hover: #27272a;
      --border-color: #3f3f46;
      --primary-color: #22c55e;
      --primary-hover: #16a34a;
      --text-main: #f4f4f5;
      --text-muted: #a1a1aa;
      --radius: 12px;
      --font-family: 'Inter', system-ui, -apple-system, sans-serif;
      --wa-number: "5511999999999"; /* N√∫mero centralizado no JS tamb√©m */
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      background-color: var(--bg-color);
      color: var(--text-main);
      font-family: var(--font-family);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      padding-bottom: 80px;
    }

    /* Demo Banner */
    .demo-banner {
      background: linear-gradient(90deg, #6366f1, #a855f7, #ec4899);
      color: white;
      text-align: center;
      padding: 8px 16px;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header { padding: 24px 16px; text-align: center; }
    header h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 4px; }
    header p { color: var(--text-muted); font-size: 0.95rem; }

    /* Tabs */
    .tabs-container {
      display: flex;
      justify-content: center;
      gap: 12px;
      padding: 0 16px 24px;
    }
    .tab-btn {
      background: var(--surface-color);
      color: var(--text-muted);
      border: 1px solid var(--border-color);
      padding: 10px 20px;
      border-radius: 30px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .tab-btn.active {
      background: var(--primary-color);
      color: #000;
      border-color: var(--primary-color);
    }

    /* Main Content Area */
    .tab-content { display: none; padding: 0 16px; max-width: 800px; margin: 0 auto; }
    .tab-content.active { display: block; animation: fadeIn 0.4s ease; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Lanchonete Extras */
    .search-bar {
      width: 100%;
      background: var(--surface-color);
      border: 1px solid var(--border-color);
      color: var(--text-main);
      padding: 12px 16px;
      border-radius: var(--radius);
      margin-bottom: 16px;
      font-size: 1rem;
      outline: none;
    }
    .search-bar:focus { border-color: var(--primary-color); }

    .categories {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 12px;
      scrollbar-width: none;
      margin-bottom: 16px;
    }
    .categories::-webkit-scrollbar { display: none; }
    .cat-chip {
      background: var(--surface-color);
      border: 1px solid var(--border-color);
      color: var(--text-main);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.85rem;
      white-space: nowrap;
      cursor: pointer;
    }
    .cat-chip.active { background: #3f3f46; border-color: #52525b; }

    /* Grid & Cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }
    .card {
      background: var(--surface-color);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      padding: 16px;
      display: flex;
      flex-direction: column;
      position: relative;
      transition: transform 0.2s, border-color 0.2s;
    }
    .card:hover { border-color: var(--primary-color); transform: translateY(-2px); }
    .card-tag {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #ef4444;
      color: #fff;
      font-size: 0.7rem;
      font-weight: bold;
      padding: 4px 8px;
      border-radius: 6px;
      text-transform: uppercase;
    }
    .card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
    .card-emoji { font-size: 2.5rem; background: #27272a; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 10px; }
    .card-title { font-size: 1.1rem; font-weight: 600; }
    .card-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; flex-grow: 1; }
    .card-price { font-size: 1.2rem; font-weight: 700; color: var(--primary-color); margin-bottom: 12px; }
    
    /* Card Actions */
    .card-actions { display: flex; gap: 12px; align-items: center; }
    .qty-control {
      display: flex;
      align-items: center;
      background: var(--bg-color);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    .qty-btn { background: none; border: none; color: var(--text-main); padding: 8px 12px; cursor: pointer; font-size: 1.1rem; }
    .qty-btn:hover { background: var(--surface-hover); }
    .qty-value { padding: 0 8px; font-weight: 600; font-size: 0.95rem; width: 24px; text-align: center; }
    
    .btn-wa {
      flex-grow: 1;
      background: var(--primary-color);
      color: #000;
      border: none;
      padding: 10px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: background 0.2s;
    }
    .btn-wa:hover { background: var(--primary-hover); }
    .btn-wa-service { width: 100%; margin-top: auto; }

    /* Extras Sections (How it works, FAQ, Proof) */
    .section-extra { max-width: 800px; margin: 40px auto; padding: 0 16px; }
    .section-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 20px; text-align: center; }
    
    .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; text-align: center; }
    .step-card { background: var(--surface-color); padding: 20px; border-radius: var(--radius); border: 1px solid var(--border-color); }
    .step-icon { font-size: 2rem; margin-bottom: 10px; }
    .step-title { font-weight: 600; margin-bottom: 4px; }
    .step-desc { font-size: 0.85rem; color: var(--text-muted); }

    .testimonials { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; }
    .testi-card { background: var(--surface-color); padding: 16px; border-radius: var(--radius); border: 1px solid var(--border-color); }
    .testi-stars { color: #fbbf24; margin-bottom: 8px; font-size: 0.9rem; }
    .testi-text { font-size: 0.9rem; font-style: italic; margin-bottom: 12px; }
    .testi-author { font-size: 0.85rem; font-weight: 600; color: var(--primary-color); }

    .faq-item { background: var(--surface-color); margin-bottom: 10px; border-radius: var(--radius); border: 1px solid var(--border-color); overflow: hidden; }
    .faq-question { padding: 16px; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .faq-answer { padding: 0 16px 16px; font-size: 0.9rem; color: var(--text-muted); display: none; }
    .faq-item.open .faq-answer { display: block; }
    .faq-item.open .faq-icon { transform: rotate(45deg); }
    .faq-icon { transition: transform 0.2s; }

    /* Floating WhatsApp Button */
    .float-wa {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary-color);
      color: #000;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
      z-index: 900;
      text-decoration: none;
      transition: transform 0.2s;
    }
    .float-wa:hover { transform: scale(1.1); }

    /* Modal Checkout */
    .modal-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); backdrop-filter: blur(4px);
      display: none; align-items: center; justify-content: center;
      z-index: 1000; padding: 16px;
    }
    .modal-overlay.active { display: flex; animation: fadeIn 0.2s; }
    .modal-content {
      background: var(--surface-color);
      width: 100%; max-width: 400px;
      border-radius: var(--radius);
      border: 1px solid var(--border-color);
      display: flex; flex-direction: column;
      max-height: 90vh;
    }
    .modal-header { padding: 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
    .modal-header h2 { font-size: 1.2rem; }
    .btn-close { background: none; border: none; color: var(--text-muted); font-size: 1.5rem; cursor: pointer; }
    .modal-body { padding: 16px; overflow-y: auto; }
    
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 6px; color: var(--text-muted); }
    .form-control { width: 100%; background: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-main); padding: 10px; border-radius: 8px; font-family: inherit; font-size: 0.95rem; }
    .form-control:focus { outline: none; border-color: var(--primary-color); }
    
    .toggle-group { display: flex; gap: 8px; background: var(--bg-color); padding: 4px; border-radius: 8px; border: 1px solid var(--border-color); }
    .toggle-btn { flex: 1; padding: 8px; text-align: center; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: background 0.2s; }
    .toggle-btn.active { background: var(--surface-color); color: var(--primary-color); border: 1px solid var(--border-color); }

    .modal-footer { padding: 16px; border-top: 1px solid var(--border-color); }
    .modal-total { display: flex; justify-content: space-between; font-size: 1.1rem; font-weight: 700; margin-bottom: 12px; }

    /* Cart Summary List */
    .cart-summary { margin-bottom: 16px; background: var(--bg-color); padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); }
    .cart-item-row { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 4px; }
    .cart-item-row:last-child { margin-bottom: 0; }

    /* Admin Instructions (Bottom) */
    .instructions-panel {
      max-width: 800px; margin: 40px auto 20px; padding: 24px;
      background: #1e1e24; border-left: 4px solid #6366f1; border-radius: 8px;
    }
    .instructions-panel h3 { color: #818cf8; margin-bottom: 12px; }
    .instructions-panel p, .instructions-panel li { font-size: 0.9rem; color: #d4d4d8; margin-bottom: 8px; }
    .instructions-panel code { background: #000; padding: 2px 6px; border-radius: 4px; color: #a78bfa; }
  </style>
</head>
<body>

  <!-- Portfolio Banner -->
  <div class="demo-banner">
    üöÄ DEMO ‚Äî feito por Desenvolvedor Expert ‚Äî entrego em 2 horas
  </div>

  <!-- Header -->
  <header>
    <h1>Menu & Servi√ßos</h1>
    <p>Pe√ßa ou agende com 1 clique pelo WhatsApp</p>
  </header>

  <!-- Navigation Tabs -->
  <nav class="tabs-container">
    <button class="tab-btn active" onclick="switchTab('lanchonete')">üçî Lanchonete</button>
    <button class="tab-btn" onclick="switchTab('servicos')">üõ†Ô∏è Servi√ßos</button>
  </nav>

  <!-- TAB: Lanchonete -->
  <main id="tab-lanchonete" class="tab-content active">
    <input type="search" class="search-bar" id="search-input" placeholder="Buscar prato ou bebida..." oninput="filterFood()">
    
    <div class="categories" id="cat-container">
      <div class="cat-chip active" onclick="setCategory('all', this)">Todos</div>
      <div class="cat-chip" onclick="setCategory('burgers', this)">Burgers</div>
      <div class="cat-chip" onclick="setCategory('porcoes', this)">Por√ß√µes</div>
      <div class="cat-chip" onclick="setCategory('bebidas', this)">Bebidas</div>
      <div class="cat-chip" onclick="setCategory('sobremesas', this)">Sobremesas</div>
    </div>

    <div class="grid" id="food-grid">
      <!-- Injetado via JS -->
    </div>
  </main>

  <!-- TAB: Servi√ßos -->
  <main id="tab-servicos" class="tab-content">
    <div class="grid" id="services-grid">
      <!-- Injetado via JS -->
    </div>
  </main>

  <!-- Extra Sections -->
  <section class="section-extra">
    <h2 class="section-title">Como funciona?</h2>
    <div class="steps">
      <div class="step-card">
        <div class="step-icon">üì±</div>
        <div class="step-title">1. Escolha</div>
        <div class="step-desc">Selecione o produto ou servi√ßo desejado no nosso card√°pio digital.</div>
      </div>
      <div class="step-card">
        <div class="step-icon">‚úçÔ∏è</div>
        <div class="step-title">2. Preencha</div>
        <div class="step-desc">Informe seus dados e op√ß√µes de entrega rapidamente.</div>
      </div>
      <div class="step-card">
        <div class="step-icon">‚úÖ</div>
        <div class="step-title">3. Confirme no Whats</div>
        <div class="step-desc">O pedido chega formatado direto no nosso WhatsApp!</div>
      </div>
    </div>
  </section>

  <section class="section-extra">
    <h2 class="section-title">O que dizem os clientes</h2>
    <div class="testimonials">
      <div class="testi-card">
        <div class="testi-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <div class="testi-text">"Muito pr√°tico! O pedido j√° chega todo certinho no WhatsApp, economiza muito tempo."</div>
        <div class="testi-author">- Jo√£o Silva</div>
      </div>
      <div class="testi-card">
        <div class="testi-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <div class="testi-text">"Os hamb√∫rgueres s√£o √≥timos e o sistema de pedir √© o mais r√°pido que j√° vi."</div>
        <div class="testi-author">- Maria Fernandes</div>
      </div>
      <div class="testi-card">
        <div class="testi-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <div class="testi-text">"Agendei meu servi√ßo em menos de 1 minuto. Recomendo demais o atendimento!"</div>
        <div class="testi-author">- Carlos Eduardo</div>
      </div>
    </div>
  </section>

  <section class="section-extra">
    <h2 class="section-title">D√∫vidas Frequentes</h2>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-question">Quais as formas de pagamento? <span class="faq-icon">+</span></div>
      <div class="faq-answer">Aceitamos Pix, Cart√£o de Cr√©dito/D√©bito na entrega e Dinheiro.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-question">Qual o tempo de entrega/servi√ßo? <span class="faq-icon">+</span></div>
      <div class="faq-answer">Lanches levam em m√©dia 30 a 45 minutos. Servi√ßos dependem da disponibilidade combinada via WhatsApp.</div>
    </div>
    <div class="faq-item" onclick="toggleFaq(this)">
      <div class="faq-question">Posso alterar o pedido depois de enviar? <span class="faq-icon">+</span></div>
      <div class="faq-answer">Sim! Como o pedido √© finalizado diretamente no WhatsApp com um atendente humano, voc√™ pode solicitar altera√ß√µes antes da prepara√ß√£o.</div>
    </div>
  </section>

  <!-- Instructions Panel -->
  <section class="instructions-panel">
    <h3>‚öôÔ∏è Como editar e publicar este Demo</h3>
    <p>Este arquivo √© 100% autossuficiente (HTML/CSS/JS juntos).</p>
    <ul>
      <li><strong>Trocar n√∫mero de WhatsApp:</strong> Abra o arquivo em um editor de texto e mude a vari√°vel <code>WHATSAPP_NUMBER = "5511999999999"</code> na linha 364.</li>
      <li><strong>Trocar produtos/servi√ßos:</strong> Modifique os arrays <code>FOOD_DB</code> e <code>SERVICES_DB</code> logo abaixo.</li>
      <li><strong>Publicar Gr√°tis:</strong> Fa√ßa login no <a href="https://app.netlify.com/drop" target="_blank" style="color:#a78bfa;">Netlify Drop</a> ou Cloudflare Pages e simplesmente arraste a pasta ou este arquivo <code>index.html</code> para l√°. Em segundos seu site estar√° online!</li>
    </ul>
  </section>

  <!-- Floating WhatsApp -->
  <a href="https://wa.me/5511999999999" target="_blank" class="float-wa" id="float-wa-link">
    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
  </a>

  <!-- Checkout Modal -->
  <div class="modal-overlay" id="checkout-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Finalizar Pedido</h2>
        <button class="btn-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body">
        
        <div class="cart-summary" id="cart-summary">
          <!-- Injetado via JS -->
        </div>

        <div class="form-group" id="delivery-toggle-group">
          <label>Recebimento</label>
          <div class="toggle-group">
            <div class="toggle-btn active" id="btn-entrega" onclick="setDeliveryType('entrega')">üõµ Entrega</div>
            <div class="toggle-btn" id="btn-retirada" onclick="setDeliveryType('retirada')">üè™ Retirada</div>
          </div>
        </div>

        <div class="form-group" id="address-group">
          <label>Endere√ßo de Entrega</label>
          <input type="text" id="inp-address" class="form-control" placeholder="Rua, N√∫mero, Bairro...">
        </div>

        <div class="form-group" id="payment-group">
          <label>Forma de Pagamento</label>
          <select id="inp-payment" class="form-control">
            <option value="Pix">Pix (Mais r√°pido)</option>
            <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
            <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
            <option value="Dinheiro">Dinheiro (Levar troco)</option>
          </select>
        </div>

        <div class="form-group">
          <label>Observa√ß√£o (Opcional)</label>
          <textarea id="inp-obs" class="form-control" rows="2" placeholder="Ex: Tirar cebola, alergia a amendoim, troco para 50..."></textarea>
        </div>

      </div>
      <div class="modal-footer">
        <div class="modal-total" id="modal-total-display">
          <span>Total:</span>
          <span id="modal-total-value">R$ 0,00</span>
        </div>
        <button class="btn-wa btn-wa-service" onclick="sendToWhatsApp()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
          Confirmar no WhatsApp
        </button>
      </div>
    </div>
  </div>

  <script>
    // ==========================================
    // CONFIGURA√á√ïES GERAIS
    // ==========================================
    const WHATSAPP_NUMBER = "5511999999999";
    document.getElementById('float-wa-link').href = `https://wa.me/${WHATSAPP_NUMBER}`;

    // ==========================================
    // BANCO DE DADOS FICT√çCIO
    // ==========================================
    const FOOD_DB = [
      { id: 'f1', cat: 'burgers', name: 'Smash Supreme', desc: 'Duplo smash 90g, cheddar, bacon crocante, maionese da casa no p√£o brioche.', price: 32.90, tag: 'Mais vendido', emoji: 'üçî' },
      { id: 'f2', cat: 'burgers', name: 'Chicken Crispy', desc: 'Sobrecoxa empanada, alface americana, picles e maionese verde.', price: 28.50, tag: '', emoji: 'üçó' },
      { id: 'f3', cat: 'burgers', name: 'Vegan Burger', desc: 'Hamb√∫rguer de gr√£o de bico, queijo vegano, r√∫cula e tomate.', price: 30.00, tag: '', emoji: 'üå±' },
      { id: 'f4', cat: 'porcoes', name: 'Fritas com Cheddar', desc: 'Por√ß√£o generosa (500g) de batata frita r√∫stica com cheddar derretido e bacon.', price: 24.90, tag: 'Promo', emoji: 'üçü' },
      { id: 'f5', cat: 'porcoes', name: 'Onion Rings', desc: 'An√©is de cebola empanados e super crocantes (12 unid).', price: 18.00, tag: '', emoji: 'üßÖ' },
      { id: 'f6', cat: 'bebidas', name: 'Coca-Cola Lata', desc: '350ml gelada.', price: 6.50, tag: '', emoji: 'ü•§' },
      { id: 'f7', cat: 'bebidas', name: 'Suco Natural Laranja', desc: 'Feito na hora (400ml).', price: 9.00, tag: '', emoji: 'üçä' },
      { id: 'f8', cat: 'sobremesas', name: 'Brownie c/ Sorvete', desc: 'Brownie de chocolate quente com bola de sorvete de baunilha.', price: 18.90, tag: '', emoji: 'üç®' },
      { id: 'f9', cat: 'sobremesas', name: 'Pudim de Leite', desc: 'Fatia caprichada de pudim caseiro sem furinhos.', price: 12.00, tag: '', emoji: 'üçÆ' }
    ];

    const SERVICES_DB = [
      { id: 's1', name: 'Corte Masculino', price: 40.00, time: '30 min', tag: '', emoji: '‚úÇÔ∏è' },
      { id: 's2', name: 'Corte + Barba (Combo)', price: 70.00, time: '60 min', tag: 'Mais popular', emoji: 'üßî‚Äç‚ôÇÔ∏è' },
      { id: 's3', name: 'Manuten√ß√£o de Celular', price: 150.00, time: 'An√°lise', tag: '', emoji: 'üì±' },
      { id: 's4', name: 'Diarista (Pacote 6h)', price: 180.00, time: '6h', tag: '', emoji: 'üßπ' },
      { id: 's5', name: 'Frete R√°pido (Pick-up)', price: 100.00, time: 'A combinar', tag: '', emoji: 'üöö' }
    ];

    // ==========================================
    // ESTADO DA APLICA√á√ÉO
    // ==========================================
    let currentCategory = 'all';
    let foodQuantities = {}; // Armazena qty tempor√°ria do card { id: qty }
    
    // Estado do Modal
    let modalMode = 'food'; // 'food' ou 'service'
    let orderContext = []; // Array de itens para o checkout
    let deliveryType = 'entrega';

    // Inicializar quantidades
    FOOD_DB.forEach(f => foodQuantities[f.id] = 1);

    // ==========================================
    // FUN√á√ïES DE RENDERIZA√á√ÉO
    // ==========================================
    const formatMoney = (val) => val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

    function renderFood() {
      const grid = document.getElementById('food-grid');
      const term = document.getElementById('search-input').value.toLowerCase();
      
      const filtered = FOOD_DB.filter(f => {
        const matchCat = currentCategory === 'all' || f.cat === currentCategory;
        const matchSearch = f.name.toLowerCase().includes(term) || f.desc.toLowerCase().includes(term);
        return matchCat && matchSearch;
      });

      if (filtered.length === 0) {
        grid.innerHTML = `<p style="color: var(--text-muted); grid-column: 1/-1; text-align: center; padding: 20px;">Nenhum item encontrado.</p>`;
        return;
      }

      grid.innerHTML = filtered.map(f => `
        <div class="card">
          ${f.tag ? `<div class="card-tag">${f.tag}</div>` : ''}
          <div class="card-header">
            <div class="card-emoji">${f.emoji}</div>
            <div class="card-title">${f.name}</div>
          </div>
          <div class="card-desc">${f.desc}</div>
          <div class="card-price">${formatMoney(f.price)}</div>
          <div class="card-actions">
            <div class="qty-control">
              <button class="qty-btn" onclick="updateQty('${f.id}', -1)">-</button>
              <div class="qty-value" id="qty-${f.id}">${foodQuantities[f.id]}</div>
              <button class="qty-btn" onclick="updateQty('${f.id}', 1)">+</button>
            </div>
            <button class="btn-wa" onclick="openFoodCheckout('${f.id}')">Pedir</button>
          </div>
        </div>
      `).join('');
    }

    function renderServices() {
      const grid = document.getElementById('services-grid');
      grid.innerHTML = SERVICES_DB.map(s => `
        <div class="card">
          ${s.tag ? `<div class="card-tag">${s.tag}</div>` : ''}
          <div class="card-header">
            <div class="card-emoji">${s.emoji}</div>
            <div class="card-title">${s.name}</div>
          </div>
          <div class="card-desc">Tempo m√©dio: <strong>${s.time}</strong></div>
          <div class="card-price">a partir de ${formatMoney(s.price)}</div>
          <button class="btn-wa btn-wa-service" onclick="openServiceCheckout('${s.id}')">Agendar no WhatsApp</button>
        </div>
      `).join('');
    }

    // ==========================================
    // INTERA√á√ïES DA UI
    // ==========================================
    function switchTab(tabId) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      event.currentTarget.classList.add('active');
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      document.getElementById(`tab-${tabId}`).classList.add('active');
    }

    function setCategory(cat, el) {
      document.querySelectorAll('.cat-chip').forEach(chip => chip.classList.remove('active'));
      el.classList.add('active');
      currentCategory = cat;
      renderFood();
    }

    function filterFood() {
      renderFood();
    }

    function updateQty(id, change) {
      let current = foodQuantities[id];
      current += change;
      if (current < 1) current = 1; // M√≠nimo 1 para pedir
      foodQuantities[id] = current;
      document.getElementById(`qty-${id}`).innerText = current;
    }

    function toggleFaq(el) {
      el.classList.toggle('open');
    }

    // ==========================================
    // L√ìGICA DE CHECKOUT E MODAL
    // ==========================================
    function openFoodCheckout(itemId) {
      modalMode = 'food';
      const item = FOOD_DB.find(f => f.id === itemId);
      const qty = foodQuantities[itemId];
      
      orderContext = [{ ...item, qty }];
      
      document.getElementById('modal-title').innerText = "Finalizar Pedido";
      document.getElementById('delivery-toggle-group').style.display = 'block';
      document.getElementById('address-group').style.display = deliveryType === 'entrega' ? 'block' : 'none';
      document.getElementById('payment-group').style.display = 'block';
      
      updateModalSummary();
      document.getElementById('checkout-modal').classList.add('active');
    }

    function openServiceCheckout(serviceId) {
      modalMode = 'service';
      const service = SERVICES_DB.find(s => s.id === serviceId);
      
      orderContext = [{ ...service, qty: 1 }];
      
      document.getElementById('modal-title').innerText = "Agendar Servi√ßo";
      document.getElementById('delivery-toggle-group').style.display = 'none';
      document.getElementById('address-group').style.display = 'block'; // Para servi√ßos, endere√ßo importa
      document.querySelector('#address-group label').innerText = 'Endere√ßo (se for em domic√≠lio)';
      document.getElementById('payment-group').style.display = 'block';
      
      updateModalSummary();
      document.getElementById('checkout-modal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('checkout-modal').classList.remove('active');
      document.getElementById('inp-obs').value = '';
      document.getElementById('inp-address').value = '';
    }

    function setDeliveryType(type) {
      deliveryType = type;
      document.getElementById('btn-entrega').classList.remove('active');
      document.getElementById('btn-retirada').classList.remove('active');
      document.getElementById(`btn-${type}`).classList.add('active');
      
      document.getElementById('address-group').style.display = type === 'entrega' ? 'block' : 'none';
    }

    function updateModalSummary() {
      const summaryDiv = document.getElementById('cart-summary');
      let total = 0;
      
      summaryDiv.innerHTML = orderContext.map(item => {
        const itemTotal = item.price * item.qty;
        total += itemTotal;
        return `
          <div class="cart-item-row">
            <span>${item.qty}x ${item.name}</span>
            <span>${formatMoney(itemTotal)}</span>
          </div>
        `;
      }).join('');
      
      if (modalMode === 'service') {
        document.getElementById('modal-total-value').innerText = `A partir de ${formatMoney(total)}`;
      } else {
        document.getElementById('modal-total-value').innerText = formatMoney(total);
      }
    }

    function sendToWhatsApp() {
      const obs = document.getElementById('inp-obs').value.trim();
      const address = document.getElementById('inp-address').value.trim();
      const payment = document.getElementById('inp-payment').value;
      
      let text = "";

      if (modalMode === 'food') {
        if (deliveryType === 'entrega' && !address) {
          alert('Por favor, informe o endere√ßo de entrega.');
          return;
        }

        const item = orderContext[0];
        const total = item.price * item.qty;

        text += `*NOVO PEDIDO* üçî\n`;
        text += `-------------------------\n`;
        text += `*Item:* ${item.qty}x ${item.name}\n`;
        if (obs) text += `*Observa√ß√£o:* ${obs}\n`;
        text += `\n*Tipo:* ${deliveryType === 'entrega' ? 'üõµ Entrega' : 'üè™ Retirada'}\n`;
        if (deliveryType === 'entrega') text += `*Endere√ßo:* ${address}\n`;
        text += `*Pagamento:* ${payment}\n\n`;
        text += `*Total:* ${formatMoney(total)}\n`;
        text += `-------------------------\n`;
        text += `Pode confirmar o total e o prazo?`;

      } else {
        const service = orderContext[0];
        
        text += `*NOVO AGENDAMENTO* üõ†Ô∏è\n`;
        text += `-------------------------\n`;
        text += `*Servi√ßo:* ${service.name}\n`;
        text += `*Valor base:* a partir de ${formatMoney(service.price)}\n`;
        text += `*Tempo m√©dio:* ${service.time}\n`;
        if (address) text += `*Endere√ßo:* ${address}\n`;
        text += `*Pagamento:* ${payment}\n`;
        if (obs) text += `*Observa√ß√£o:* ${obs}\n`;
        text += `-------------------------\n`;
        text += `Pode confirmar a disponibilidade e o valor final?`;
      }

      const encodedText = encodeURIComponent(text);
      const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedText}`;
      
      window.open(url, '_blank');
      closeModal();
    }

    // Inicializa√ß√£o
    renderFood();
    renderServices();

  </script>
</body>
</html>
